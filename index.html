<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>A-Frame Live-coding World</title>
  <script src="https://unpkg.com/@croquet/croquet"></script>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/DougReeder/aframe-croquet-component@anode-fix/public/lib/aframe-croquet-component.js"></script>
<!--  <script src="https://unpkg.com/aframe-croquet-component/public/lib/aframe-croquet-component.js"></script>-->
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.0/dist/aframe-extras.min.js"></script>
</head>

<script>
  AFRAME.registerComponent('change-color-on-hover', {
    schema: {
      color: {default: 'red'}
    },

    init: function () {
      const el = this.el;
      const defaultColor = el.getAttribute('material').color;

      el.addEventListener('mouseenter', () => {
        el.setAttribute('color', this.data.color);
      });

      el.addEventListener('mouseleave', () => {
        el.setAttribute('color', defaultColor);
      });
    }
  });
</script>

<body>
<a-scene croquet="sessionName: columbusjs; password: livecode;">
  <a-assets>
<!--    <img id="brick" src="assets/TexturesCom_Wall_BrickPlain1_512_albedo.jpg" />-->
<!--    <a-asset-item id="avatarModel" src="assets/low_poly_head_with_hair_free_download.glb"></a-asset-item>-->
  </a-assets>

  <a-plane id="plane1" position="0 0 0" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"
           animation="property: rotation; from: -90 0 0; to: -90 360 0; dur: 30000; dir: alternate; easing: easeInOutQuad; loop: true"></a-plane>
  <a-dodecahedron id="die" position="-1 1 -1" color="blue" change-color-on-hover="color: yellow" multiuser></a-dodecahedron>

  <!--  <a-sky id="sky" color="#ECECEC"></a-sky>-->

  <a-entity id="rig" movement-controls="setViaAttribute: true">
    <a-entity camera position="0 1.6 2" look-controls="pointerLockEnabled: false">
      <a-cursor></a-cursor>
    </a-entity>
  </a-entity>
</a-scene>

<template id="avatarTemplate">
  <a-torus></a-torus>
<!--  <a-entity>   &lt;!&ndash; This entity's location and rotation are set from the other user's camera &ndash;&gt;-->
<!--    <a-entity gltf-model="#avatarModel" scale="0.005 0.005 0.005" rotation="0 0 0" position="0 0 0"></a-entity>-->
<!--  </a-entity>-->
</template>
</body>
</html>
